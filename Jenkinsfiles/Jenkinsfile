pipeline {
  agent any
  stages {
    stage('Checkout'){
      steps {
        checkout scm
        
        //([$class: 'GitSCM', userRemoteConfigs: [[credentialsId: 'github-login', url: 'https://github.com/sam-mckay/Unity-Github-Actions-Testing.git']]])
      }
    }
    stage('Unit Test') {
      steps {
        bat "\"C:\\Program Files\\Unity\\Hub\\Editor\\2020.3.9f1\\Editor\\Unity.exe\" -runTests -batchmode -testResults $WORKSPACE\\results.xml -logfile -"
      }
    }
    
    stage('Script Build Test') {
      steps {
        bat "\"C:\\Program Files\\Unity\\Hub\\Editor\\2020.3.9f1\\Editor\\Unity.exe\" -executeMethod ScriptBuild.Build -batchmode -testResults $WORKSPACE\\results.xml -logfile -"
      }
    }
  }
}